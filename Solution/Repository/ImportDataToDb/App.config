<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
  <appSettings>
    <add key="RepoRootDir" value="COMES FROM CONFIG TRANSFORM" />

    <!--FromDb, because caches have to be empty. The reading from FileRepo will be done manually-->
    <add key="ReadMode" value="FromDb" />

    <!--AdoNet, because the db access here is written directly with the AdoNet classes!-->
    <add key="DbAccessMode" value="AdoNet" />

    <add key="DbType" value="SQLite" />
    <!--<add key="DbType" value="MsSql" />-->

    <!--<add key="SaveMode" value="OnlyToFile" />-->
    <add key="SaveMode" value="FileAndDb" />

  </appSettings>
  <connectionStrings>
    <add name="Exin_MsSql_AdoNet_ConnStr" connectionString="COMES FROM CONFIG TRANSFORM" />
    <add name="Exin_SQLite_AdoNet_ConnStr" connectionString="data source=#SQLITE_REPO_FULLPATH#" />
  </connectionStrings>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security.OAuth" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.2.0" newVersion="2.0.2.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.2.0" newVersion="2.0.2.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.2.0" newVersion="2.0.2.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security.Cookies" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.2.0" newVersion="2.0.2.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <log4net>
    <renderer renderingClass="UtilsLocal.Log.LogRenderer, UtilsLocal" renderedClass="System.Object" />
    <appender name="FileAppender" type="log4net.Appender.FileAppender, log4net">
      <file value="ExinLog.txt" />
      <appendToFile value="true" />
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%message %newline&#xD;&#xA;                  Level: %-5level %newline&#xD;&#xA;                  Logger: %logger %newline&#xD;&#xA;                  Date: %date --- Utcdate: %utcdate %newline&#xD;&#xA;                  Timestamp: %timestamp %newline&#xD;&#xA;                  Exception: %exception %newline" />
        <!--        Date: %date %newline
                  Level: %-5level %newline
                  Logger: %logger %newline
                  Message: %message %newline
                  Appdomain: %appdomain %newline
                  Date: %date %newline
                  File: %file %newline
                  Identity: %identity %newline
                  Level: %level %newline
                  Line: %line %newline
                  Location: %location %newline
                  Logger: %logger %newline
                  Method: %method %newline
                  Message: %message %newline
                  Timestamp: %timestamp %newline
                  Type: %type %newline
                  Username: %username %newline
                  Utcdate: %utcdate %newline
                  Exception: %exception %newline"-->
      </layout>
    </appender>
    <root>
      <level value="ALL" />
      <appender-ref ref="FileAppender" />
    </root>
  </log4net>
</configuration>